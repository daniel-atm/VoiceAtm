(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{180:function(e,t,n){e.exports=n(316)},185:function(e,t,n){},187:function(e,t,n){},189:function(e,t,n){},193:function(e,t,n){},316:function(e,t,n){"use strict";n.r(t);var r=n(83),a=n(0),s=n.n(a),i=n(20),o=n.n(i),c=n(317),u=(n(185),n(187),n(189),n(3)),l=n.n(u),h=n(5),p=n(7),m=n(8),d=n(15),f=n(14),b=n(16),y=(n(193),function(){function e(){Object(p.a)(this,e);var t=window.webkitSpeechRecognition||window.SpeechRecognition;this.speechSynthesis=window.speechSynthesis,this.speechSynthesis.rate=1;var n=new t;this.recognizing=!1,n.onstart=function(){this.recognizing=!0},n.onend=function(){this.recognizing=!1},n.onerror=function(e){this.recognizing=!1},this.recognition=n}return Object(m.a)(e,[{key:"say",value:function(e){var t=this;return new Promise(function(n,r){var a=new SpeechSynthesisUtterance(e);a.rate=.6,t.speechSynthesis.speak(a),a.addEventListener("end",n)})}},{key:"islistening",value:function(){return this.recognizing}},{key:"listen",value:function(){var e=this;return new Promise(function(t,n){if(e.islistening()){var r=window.webkitSpeechRecognition||window.SpeechRecognition;e.recognition.stop(),e.recognition=new r}e.recognition.addEventListener("result",function(e){this.recognizing=!0,console.log("All results",e.results);var n=e.results[0][0].transcript;console.log("Speech to text",n),e.results[0].isFinal&&t(n)}),e.recognition.addEventListener("error",function(e){this.recognizing=!1,console.log("Recognition error"),n("Error occured while recognizing speech")}),e.recognition.addEventListener("nomatch",function(){this.recognizing=!1,console.log("Error: sorry but I could not find a match"),n("Sorry but I could not find a match")}),e.recognition.addEventListener("end",function(){this.recognizing=!1,console.log("Error: sorry but I could not recognize your speech"),n("Sorry but I could not recognize your speech")});try{e.recognition.start()}catch(a){console.error(a)}console.log("Speach recognition server started")})}}]),e}()),v=n(9),g=n(1),w=n(318),k=n(22),x=n.n(k),j=n(23),O=n.n(j);function E(e){return new Promise(function(t,n){setTimeout(function(){t()},e)})}var T=function(e){function t(){var e,n;Object(p.a)(this,t);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(n=Object(d.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(a)))).password="",n.listenToPassword=Object(h.a)(l.a.mark(function e(){var t,r,a;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props,r=t.robot,t.next,e.next=3,r.say("Please say your secret number");case 3:return e.prev=3,e.next=6,r.listen();case 6:a=e.sent,n.setPassword(a),E(500),n.submit(),e.next=17;break;case 12:return e.prev=12,e.t0=e.catch(3),e.next=16,r.say(e.t0);case 16:n.listenToPassword();case 17:case"end":return e.stop()}},e,this,[[3,12]])})),n.submit=function(){var e=Object(h.a)(l.a.mark(function e(t){var r,a;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t&&t.preventDefault(),r=n.props,r.robot,a=r.next,n.password&&setTimeout(function(){a()},500);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.setPassword=function(e){n.password=e},n}return Object(b.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.listenToPassword()}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{style:{display:"flex",alignItems:"center",flexDirection:"column",justifyItems:"center",justifyContent:"center",height:"100%"}},s.a.createElement("h1",{style:{color:"blue",textAlign:"center"}},"Please say your secret number"),s.a.createElement("form",{onSubmit:this.submit,style:{textAlign:"center"}},s.a.createElement(x.a,{margin:"normal",required:!0,fullWidth:!0,style:{border:"3px solid blue"}},s.a.createElement(O.a,{onChange:function(t){return e.setPassword(t.target.value)},name:"email",autoFocus:!0,value:this.password}))))}}]),t}(a.Component),S=Object(w.a)(Object(v.b)("robot")(Object(v.c)(Object(g.h)(T,{step:g.m,setStep:g.d,password:g.m,setPassword:g.d})))),A=n(41),C=n.n(A),P=n(17),U=function(e){function t(){var e,n;Object(p.a)(this,t);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(n=Object(d.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(a)))).password="",n.listenToTransactionType=Object(h.a)(l.a.mark(function e(){var t,r,a,s,i;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props,r=t.robot,a=t.next,s=t.setType,e.next=3,r.say("Select a transaction");case 3:return e.prev=3,e.next=6,r.listen();case 6:if("withdrawal"!==(i=e.sent).toLowerCase()){e.next=12;break}s(i.toLowerCase()),a(),e.next=15;break;case 12:return e.next=14,r.say("Can't understand your option");case 14:setTimeout(n.listenToTransactionType,0);case 15:e.next=22;break;case 17:return e.prev=17,e.t0=e.catch(3),e.next=21,r.say(e.t0);case 21:n.listenToTransactionType();case 22:case"end":return e.stop()}},e,this,[[3,17]])})),n.buttonClick=function(e){var t=n.props,r=t.setType,a=t.next;r(e.target.textContent),a()},n}return Object(b.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.listenToTransactionType()}},{key:"render",value:function(){var e={display:"flex",justifyContent:"space-around"};return s.a.createElement("div",{style:{height:"100%"}},s.a.createElement("h1",{style:{color:"blue",textAlign:"center"}},"Select a transaction"),s.a.createElement("div",{style:{display:"flex",flexDirection:"column",height:"calc(100% - 100px)",justifyContent:"space-around"}},s.a.createElement("div",{style:e},s.a.createElement(P.a,{size:"large",variant:"contained",color:"primary",onClick:this.buttonClick},"Transfer"),s.a.createElement(P.a,{size:"large",variant:"contained",color:"primary",onClick:this.buttonClick},"Withdrawal")),s.a.createElement("div",{style:e},s.a.createElement(P.a,{size:"large",variant:"contained",color:"primary",onClick:this.buttonClick},"Balance"),s.a.createElement(P.a,{size:"large",variant:"contained",color:"primary",onClick:this.buttonClick},"Pay Bills")),s.a.createElement("div",{style:e},s.a.createElement(P.a,{size:"large",variant:"contained",color:"primary",onClick:this.buttonClick},"Change Pin"),s.a.createElement(P.a,{size:"large",variant:"contained",color:"primary",onClick:this.buttonClick},"Exit"))))}}]),t}(a.Component),_=Object(w.a)(Object(v.b)("robot")(Object(v.c)(Object(g.h)(U,{step:g.m,setStep:g.d,password:g.m,setPassword:g.d})))),z=function(e){function t(){var e,n;Object(p.a)(this,t);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(n=Object(d.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(a)))).password="",n.listenToAccountType=Object(h.a)(l.a.mark(function e(){var t,r,a,s;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props,r=t.robot,a=t.next,e.next=3,r.say("Select your account type");case 3:return e.prev=3,e.next=6,r.listen();case 6:if(s=e.sent,!["current","savings"].includes(s.toLowerCase())){e.next=11;break}a(),e.next=13;break;case 11:return e.next=13,r.say("Can't understand your option");case 13:e.next=20;break;case 15:return e.prev=15,e.t0=e.catch(3),e.next=19,r.say(e.t0);case 19:n.listenToAccountType();case 20:case"end":return e.stop()}},e,this,[[3,15]])})),n}return Object(b.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.listenToAccountType()}},{key:"render",value:function(){var e=this.props,t=(e.robot,e.next);return s.a.createElement("div",{style:{height:"100%"}},s.a.createElement("h1",{style:{color:"blue",textAlign:"center"}},"Select your account type"),s.a.createElement("div",{style:{float:"right",marginRight:20}},s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement(P.a,{size:"large",variant:"contained",color:"primary",onClick:t},"Current"),s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement(P.a,{size:"large",variant:"contained",color:"primary",onClick:t},"Savings")))}}]),t}(a.Component),I=Object(w.a)(Object(v.b)("robot")(Object(v.c)(Object(g.h)(z,{step:g.m,setStep:g.d,password:g.m,setPassword:g.d})))),L=function(e){function t(){var e,n;Object(p.a)(this,t);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(n=Object(d.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(a)))).amount="",n.setAmount=function(e){n.amount=e},n.listenToAmountToWithdraw=Object(h.a)(l.a.mark(function e(){var t,r,a,s;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props,r=t.robot,a=t.next,t.setType,e.prev=1,e.next=4,r.say("Say the amount to withdraw");case 4:return e.next=6,r.listen();case 6:return s=e.sent,n.setAmount(s),e.next=10,E(1e3);case 10:a(),e.next=19;break;case 13:return e.prev=13,e.t0=e.catch(1),console.error(e.t0),e.next=18,r.say(e.t0);case 18:n.listenToAmountToWithdraw();case 19:case"end":return e.stop()}},e,this,[[1,13]])})),n}return Object(b.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.listenToAmountToWithdraw()}},{key:"render",value:function(){var e=this,t=this.props,n=(t.robot,t.next);return s.a.createElement("div",{style:{display:"flex",alignItems:"center",flexDirection:"column",justifyItems:"center",justifyContent:"center",height:"100%"}},s.a.createElement("h1",{style:{color:"blue",textAlign:"center"}},"Enter Amount"),s.a.createElement("form",{onSubmit:n,style:{textAlign:"center"}},s.a.createElement(x.a,{margin:"normal",required:!0,fullWidth:!0,style:{border:"3px solid blue"}},s.a.createElement(O.a,{type:"number",name:"amount",autoFocus:!0,onChange:function(t){e.setAmount(t.target.value)},value:this.amount}))))}}]),t}(a.Component),R=Object(w.a)(Object(v.b)("robot")(Object(v.c)(Object(g.h)(L,{amount:g.m,setAmount:g.d,password:g.m,setPassword:g.d})))),N=function(e){function t(){var e,n;Object(p.a)(this,t);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(n=Object(d.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(a)))).amount="",n.setAmount=function(e){n.amount=e},n}return Object(b.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.robot;e.next;t.say("Please take your cash!")}},{key:"render",value:function(){var e=this.props;e.robot,e.next;return s.a.createElement("div",{style:{display:"flex",alignItems:"center",flexDirection:"column",justifyItems:"center",justifyContent:"center",height:"100%"}},s.a.createElement("h1",{style:{color:"blue",textAlign:"center"}},"Please take your cash"),s.a.createElement("img",{src:"images/cash_out.jpg",alt:"CashOut",style:{width:"90%",height:"300px"}}))}}]),t}(a.Component),D=Object(w.a)(Object(v.b)("robot")(Object(v.c)(Object(g.h)(N,{amount:g.m,setAmount:g.d,password:g.m,setPassword:g.d})))),q=n(54),F=n.n(q),W=function(e){function t(){var e,n;Object(p.a)(this,t);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(n=Object(d.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(a)))).step="",n.type=null,n.setStep=function(e){n.step=e},n.nextStep=function(e){n.setStep(n.step+1)},n.setType=function(e){n.type=e},n.showPincode=function(){n.setStep("pincode")},n.showSelectTransaction=Object(h.a)(l.a.mark(function e(){var t;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props.robot,e.next=3,t.say("Please wait while your transaction is processing: ");case 3:n.setStep("select_transaction");case 4:case"end":return e.stop()}},e,this)})),n.showSelectAccountType=function(){n.setStep("select_account_type")},n.showTakeCash=function(){n.setStep("take_cash")},n.nextAfterAccountType=function(){n.setStep(n.type.toLowerCase())},n}return Object(b.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.robot;document.body.click(),F.a.alert("Click ok to continue",function(){t.say("Welcome"),e.showPincode()})}},{key:"render",value:function(){return console.log(this.step),s.a.createElement("div",{className:"atm"},s.a.createElement(C.a,{className:"screen"},"pincode"===this.step?s.a.createElement(S,{next:this.showSelectTransaction}):null,"select_transaction"===this.step?s.a.createElement(_,{next:this.showSelectAccountType,setType:this.setType}):null,"select_account_type"===this.step?s.a.createElement(I,{next:this.nextAfterAccountType}):null,"withdrawal"===this.step?s.a.createElement(R,{next:this.showTakeCash}):null,"take_cash"===this.step?s.a.createElement(D,{next:this.nextAfterAccountType}):null))}}]),t}(a.Component),M=Object(w.a)(Object(v.b)("robot")(Object(v.c)(Object(g.h)(W,{step:g.m,setStep:g.d,password:g.m,setPassword:g.d})))),B=function(){function e(t){Object(p.a)(this,e),this.storage=t}return Object(m.a)(e,[{key:"getRaw",value:function(){var e=Object(h.a)(l.a.mark(function e(t){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.storage.getItem(t));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"get",value:function(){var e=Object(h.a)(l.a.mark(function e(t,n){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t1=JSON,e.next=3,this.getRaw(t);case 3:if(e.t2=e.sent,e.t0=e.t1.parse.call(e.t1,e.t2),e.t0){e.next=7;break}e.t0=n;case 7:return e.abrupt("return",e.t0);case 8:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"setRaw",value:function(){var e=Object(h.a)(l.a.mark(function e(t,n){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.storage.setItem(t,n));case 1:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){return this.setRaw(e,JSON.stringify(t))}},{key:"remove",value:function(){var e=Object(h.a)(l.a.mark(function e(t){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.storage.removeItem(t));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}]),e}(),J=n(42),V=n.n(J),G=function(){function e(t){Object(p.a)(this,e),this.axios=t,this.axios.interceptors.response.use(function(e){return e.data},function(e){return console.log("Request error",e),e.response?Promise.reject(e.response):e.request?Promise.reject(e.request):Promise.reject(e)})}return Object(m.a)(e,[{key:"get",value:function(){var e;return(e=this.axios).get.apply(e,arguments)}},{key:"post",value:function(){var e;return(e=this.axios).post.apply(e,arguments)}},{key:"put",value:function(){var e;return(e=this.axios).put.apply(e,arguments)}},{key:"head",value:function(){var e;return(e=this.axios).head.apply(e,arguments)}},{key:"delete",value:function(){var e;return(e=this.axios).delete.apply(e,arguments)}},{key:"uploadFile",value:function(){var e=Object(h.a)(l.a.mark(function e(t,n,r){var a,s;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(a=new FormData).append(n,r),e.next=4,this.post(t,a);case 4:return s=e.sent,e.abrupt("return",{url:s.url,thumb:this.getThumbUrl(s.url)});case 6:case"end":return e.stop()}},e,this)}));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"getThumbUrl",value:function(e){var t=e.split("/"),n=t.pop(),r=t.join("/");return"".concat(r,"/thumb_").concat(n)}}]),e}(),H=function(){function e(t,n,r){var a=this;Object(p.a)(this,e),this.username="",this.confirm_password="",this.password="",this.name="",this.email="",this.phoneNumber="",this.address="",this.accountType="",this.image=null,this.thumb=null,this.loading=!1,this.authenticated=!1,this.user=null,this.request=t,this.baseUrl=r,this.localStorage=n,this.localStorage.getRaw("username").then(function(e){console.log("Username is loaded",e),e&&a.setUsername(e)}),this.localStorage.get("user").then(function(e){e&&(a.setAuthenticated(!0),a.setUser(e))})}return Object(m.a)(e,[{key:"isAuthenticated",value:function(){var e=Object(h.a)(l.a.mark(function e(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.authenticated){e.next=2;break}return e.abrupt("return",!0);case 2:return e.next=4,this.localStorage.get("user");case 4:if(!e.sent){e.next=7;break}return e.abrupt("return",!0);case 7:return e.abrupt("return",!1);case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"saveUser",value:function(){var e=Object(h.a)(l.a.mark(function e(t){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.localStorage.set("user",t);case 2:this.setUser(t);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"setImageUri",value:function(e){this.imageUri=e}},{key:"setAccountType",value:function(e){e&&(this.accountType=e)}},{key:"setUser",value:function(e){this.user=e}},{key:"setUsername",value:function(e){this.username=e}},{key:"setPassword",value:function(e){this.password=e}},{key:"setConfirmPassword",value:function(e){this.confirm_password=e}},{key:"setEmail",value:function(e){this.email=e}},{key:"setName",value:function(e){this.name=e}},{key:"setAddress",value:function(e){this.address=e}},{key:"setPhoneNumber",value:function(e){this.phoneNumber=e}},{key:"setLoading",value:function(e){this.loading=e}},{key:"setAuthenticated",value:function(e){this.authenticated=e}},{key:"uploadProfilePicture",value:function(){var e=Object(h.a)(l.a.mark(function e(){var t;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.request.uploadFile("".concat(this.baseUrl,"/files"),"file",this.imageUri);case 2:t=e.sent,this.image=t.url,this.thumb=t.thumb;case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"resetForm",value:function(){this.username="",this.password="",this.email="",this.name="",this.phoneNumber="",this.address="",this.accountType="",this.image=null,this.thumb=null,this.setImageUri(null)}},{key:"handleResponse",value:function(e){return this.setLoading(!1),e&&e.data&&e.data.message?Promise.reject(new Error(e.data.message)):(e.message,Promise.reject(e))}},{key:"handleAuthenticated",value:function(){var e=Object(h.a)(l.a.mark(function e(t){var n;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t.user).is_business=Number(n.is_business),n.is_customer=Number(n.is_customer),this.authenticated=!0,console.log("success logging in",n),e.next=7,this.localStorage.set("user",n);case 7:this.setUser(n),this.localStorage.setRaw("username",this.username),this.setLoading(!1);case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"login",value:function(){var e=Object(h.a)(l.a.mark(function e(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setLoading(!0),console.log("Logging in to it"),e.abrupt("return",this.request.post(this.baseUrl+"/users/login",{username:this.username,password:this.password}).then(this.handleAuthenticated.bind(this)).catch(this.handleResponse));case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"register",value:function(){var e=Object(h.a)(l.a.mark(function e(){var t;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setLoading(!0),e.prev=1,e.next=4,this.uploadProfilePicture();case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),this.setLoading(!1),console.warn(e.t0),e.abrupt("return",Promise.reject("Error uploading profile image"));case 11:return e.next=13,this.request.post(this.baseUrl+"/users/register",{name:this.name,email:this.email,username:this.username,password:this.password,image:this.image,thumb:this.thumb}).catch(this.handleResponse);case 13:return t=e.sent,e.next=16,this.handleAuthenticated(t);case 16:return e.abrupt("return",t);case 17:case"end":return e.stop()}},e,this,[[1,6]])}));return function(){return e.apply(this,arguments)}}()},{key:"logout",value:function(){this.authenticated=!1,this.localStorage.remove("user")}},{key:"detailsValid",get:function(){return!Boolean(this.name&&this.email&&this.username&&this.password&&this.password===this.confirm_password)}},{key:"isBusinessAccount",get:function(){return!!this.user.is_business}},{key:"registrationComplete",get:function(){return!(this.user.is_business&&!this.user.business)}}]),e}(),K=Object(g.h)(H,{username:g.m,password:g.m,confirm_password:g.m,setConfirmPassword:g.d,name:g.m,email:g.m,phoneNumber:g.m,address:g.m,accountType:g.m,imageUri:g.m,loading:g.m,authenticated:g.m,user:g.m,setImageUri:g.d,setAccountType:g.d,setUser:g.d,setUsername:g.d,setPassword:g.d,setEmail:g.d,setName:g.d,setAddress:g.d,setPhoneNumber:g.d,setLoading:g.d,setAuthenticated:g.d,detailsValid:g.e,registrationComplete:g.e,resetForm:g.d,handleResponse:g.d.bound,handleAuthenticated:g.d.bound,login:g.d,logout:g.d});Object(g.f)({enforceActions:!0});var Q=new G(V.a),X=new B(localStorage),Y={authStore:new K(Q,X,"http://localhost/motivation_app/public/api"),axios:V.a,request:Q,baseUrl:"http://localhost/motivation_app/public/api",localStorage:X},Z=Object(r.a)({},Y,{robot:new y});o.a.render(s.a.createElement(v.a,Z,s.a.createElement(c.a,null,s.a.createElement(M,null))),document.getElementById("root"))}},[[180,2,1]]]);
//# sourceMappingURL=main.d9bf8184.chunk.js.map